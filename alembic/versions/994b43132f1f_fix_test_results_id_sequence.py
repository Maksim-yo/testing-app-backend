"""fix test_results id sequence

Revision ID: 994b43132f1f
Revises: 9e42e376f6c2
Create Date: 2025-05-20 11:28:51.249005

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '994b43132f1f'
down_revision: Union[str, None] = '9e42e376f6c2'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None

def upgrade() -> None:
    op.execute("""
    ALTER TABLE test_results 
    ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;
    """)

def downgrade() -> None:
    op.execute("""
    ALTER TABLE test_results 
    ALTER COLUMN id DROP IDENTITY IF EXISTS;
    """)
